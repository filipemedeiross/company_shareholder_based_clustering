{% load static %}
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <title>Hermes</title>

        <link rel="icon" href="{% static 'companies/images/hermes_favicon.jpg' %}">
        <link rel="stylesheet" href="{% static 'companies/css/style.css' %}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" referrerpolicy="no-referrer" />
    </head>

    <body>
        <header class="top-bar">
            <h1 class="top-bar-title">
                <a href="{% url 'companies:list' %}">
                    <img src="{% static 'companies/images/hermes_logo.png' %}" alt="Hermes Logo" class="logo"> Hermes
                </a>
            </h1>
        </header>

        <div class="container">
            <div class="sidebar" id="sidebar">
                <nav>
                    <ul>
                        <li><a href="{% url 'companies:list' %}"><i class="fas fa-building"></i> <span class="menu-text">Empresas</span></a></li>
                        <li><a href="{% url 'summarizer:dashboard' %}"><i class="fas fa-chart-bar"></i> <span class="menu-text">Estat√≠sticas</span></a></li>
                    </ul>
                </nav>
            </div>
            <div class="sidebar-toggle" id="sidebar-toggle">
                <i class="fas fa-chevron-left" id="toggle-icon"></i>
            </div>
            <div class="main-content" id="main-content">
                {% block content %}{% endblock %}
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('main-content');
                const sidebarToggle = document.getElementById('sidebar-toggle');
                const toggleIcon = document.getElementById('toggle-icon');
                const menuTexts = document.querySelectorAll('.menu-text');
                
                // Check if sidebar state is saved in localStorage
                const sidebarCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
                
                // Apply initial state
                if (sidebarCollapsed) {
                    sidebar.classList.add('collapsed');
                    mainContent.classList.add('expanded');
                    sidebarToggle.classList.add('collapsed');
                    toggleIcon.classList.remove('fa-chevron-left');
                    toggleIcon.classList.add('fa-chevron-right');
                    menuTexts.forEach(text => text.style.display = 'none');
                }
                
                // Toggle sidebar on click
                sidebarToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('collapsed');
                    mainContent.classList.toggle('expanded');
                    sidebarToggle.classList.toggle('collapsed');
                    
                    if (sidebar.classList.contains('collapsed')) {
                        toggleIcon.classList.remove('fa-chevron-left');
                        toggleIcon.classList.add('fa-chevron-right');
                        menuTexts.forEach(text => text.style.display = 'none');
                        localStorage.setItem('sidebarCollapsed', 'true');
                    } else {
                        toggleIcon.classList.remove('fa-chevron-right');
                        toggleIcon.classList.add('fa-chevron-left');
                        menuTexts.forEach(text => text.style.display = 'inline');
                        localStorage.setItem('sidebarCollapsed', 'false');
                    }
                });
            });
        </script>
    </body>

</html>